<div (click)="emitHideCeateTaskFormEvent()" [ngStyle]="{'display': isCeateTaskFormVisible() ? 'block' : 'none'}"
    class="task_form__background">
</div>
<div [ngStyle]="{'display': isCeateTaskFormVisible() ? 'block' : 'none'}" class="form_wrapper">
    <form [formGroup]="taskForm" (ngSubmit)="createTask()" class="form">
        <div class="form__controls_wrapper">
            <label for="title" class="form__label">
                Title:
            </label>
            <input formControlName="title" id="title" type="text" placeholder="Title" class="form__input">
            @if (taskForm.controls.title.touched) {
            @for (error of formErrors(taskForm.controls.title, "Title",4,100); track $index) {
            <p class="form__error">{{error}}</p>
            }
            }
        </div>
        <div class="form__controls_wrapper">
            <label for="description" class="form__label">Description:</label>
            <input formControlName="description" id="description" type="description" placeholder="Description"
                class="form__input">
            @if (taskForm.controls.description.touched) {
            @for (error of formErrors(taskForm.controls.description, "Description", 0, 1000); track $index) {
            <p class="form__error">{{error}}</p>
            }
            }
        </div>
        <div class="form__controls_wrapper">
            <label class="form__label">Priority:</label>
            <div class="form__radios_wrapper">
                <div class="form__controls_wrapper">
                    <label for="low" class="form__label form__label--small">Low</label>
                    <input formControlName="priority" checked="checked" value="LOW" id="low" type="radio"
                        class="form__input">
                </div>
                <div class="form__controls_wrapper">
                    <label for="medium" class="form__label form__label--small">Medium</label>
                    <input formControlName="priority" value="MEDIUM" id="medium" type="radio" class="form__input">
                </div>
                <div class="form__controls_wrapper">
                    <label for="high" class="form__label form__label--small">High</label>
                    <input formControlName="priority" value="HIGH" id="high" type="radio" class="form__input">
                </div>
            </div>
        </div>
        <div class="form__controls_wrapper">
            <label class="form__label">Status:</label>
            <div class="form__radios_wrapper">
                <div class="form__controls_wrapper">
                    <label for="ready-to-start" class="form__label form__label--small">Redy to start</label>
                    <input formControlName="status" checked="checked" value="READY_TO_START" id="ready-to-start"
                        type="radio" class="form__input">
                </div>
                <div class="form__controls_wrapper">
                    <label for="in-progress" class="form__label form__label--small">In progress</label>
                    <input formControlName="status" value="IN_PROGRESS" id="in-progress" type="radio"
                        class="form__input">
                </div>
                <div class="form__controls_wrapper">
                    <label for="done" class="form__label form__label--small">Done</label>
                    <input formControlName="status" value="DONE" id="done" type="radio" class="form__input">
                </div>
            </div>
        </div>
        <div class="form__controls_wrapper">
            <label for="assigned-to" class="form__label">Assigned to:</label>
            <select id="assigned-to" class="form__select">
                @for (user of users(); track $index) {
                <option class="form__select" [value]="user.userId">{{user.username}}</option>
                }
            </select>
        </div>
        <div class="form__controls_wrapper">
            <label for="target-end-date" class="form__label">
                Target end date:
            </label>
            <input formControlName="targetEndDate" [min]="minTargetEndDate" id="target-end-date" type="date"
                class="form__input">
        </div>
        <div class="form__controls_wrapper">
            <button [ngClass]="taskForm.valid || !taskForm.touched ? '' : 'form__button--error'" class="form__button"
                type="submit">Submit</button>
        </div>
        <div class="form__controls_wrapper">
            @for (error of errors(); track $index) {
            <p class="form__error">{{error}}</p>
            }
        </div>
    </form>
</div>